<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Notas 190 - COPOM SP</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
</head>
<body>

    <header>
        <div class="header-brand">
            <img src="LOGO.PNG" alt="Logo COPOM" class="header-logo">
            <h1>COPOM SP</h1>
        </div>
        
        <div class="header-search-container">
            <div class="search-wrapper">
                <i class="fas fa-search search-icon"></i>
                <input type="text" id="search-input" placeholder="Pesquisar...">
            </div>
        </div>

        <div class="header-actions">
            <div id="view-counter" class="view-counter" title="Total de acessos">
                <i class="fas fa-eye"></i>
                <span id="view-count">0</span>
            </div>
            <button id="dark-mode-toggle" class="icon-btn" aria-label="Modo Noturno">
                <i class="fas fa-moon"></i>
            </button>
            <button id="settings-toggle" class="icon-btn" aria-label="Personalizar Cores">
                <i class="fas fa-palette"></i>
            </button>
            <button id="save-btn" class="icon-btn hidden" aria-label="Salvar Alterações" style="color: var(--success);">
                <i class="fas fa-cloud-upload-alt"></i>
            </button>
            <button id="view-toggle" class="icon-btn" aria-label="Alterar Visualização">
                <i class="fas fa-list"></i>
            </button>
            <button id="docs-btn" class="icon-btn" aria-label="Documentos">
                <i class="fas fa-file-alt"></i>
            </button>
            <button id="urgent-btn" class="icon-btn" aria-label="Aviso Urgente" style="color: var(--danger);">
                <i class="fas fa-exclamation-triangle"></i>
            </button>
            <button id="admin-toggle" class="icon-btn" aria-label="Administração">
                <i class="fas fa-lock"></i>
            </button>
        </div>
    </header>

    <div class="nav-wrapper">
        <div class="nav-scroll-mask">
            <nav id="category-track" class="category-track">
                <!-- Categories injected by JS -->
            </nav>
        </div>
        <div id="nav-controls" class="nav-controls hidden">
            <!-- Admin controls injected by JS -->
        </div>
    </div>

    <main id="button-grid" class="grid-container">
        <!-- Buttons will be injected here by JS -->
    </main>

    <div id="urgent-bar" class="urgent-marquee hidden">
        <div id="urgent-content" class="urgent-content"></div>
    </div>

    <footer class="marquee-footer">
        <div class="marquee-content">
            CRIADO POR SETOR DE TECNOLOGIA, CAP PM JORGE, SGT ALAN, CB PM SALES LIMA, CB PM PIVARO
        </div>
    </footer>

    <!-- Floating Action Button for Adding (Visible only in admin mode) -->
    <button id="add-btn" class="fab hidden" aria-label="Adicionar Nova Mensagem">
        <i class="fas fa-plus"></i>
    </button>

    <!-- Modal for Edit/Create Button -->
    <div id="modal" class="modal hidden">
        <div class="modal-content">
            <h2 id="modal-title">Editar Botão</h2>
            <form id="msg-form">
                <input type="hidden" id="msg-id">
                
                <div class="form-group">
                    <label for="msg-label">Rótulo do Botão</label>
                    <input type="text" id="msg-label" required placeholder="Ex: Bom dia">
                </div>

                <div class="form-group">
                    <label for="msg-text">Mensagem (Copiada ao clicar)</label>
                    <textarea id="msg-text" required placeholder="Ex: Olá! Como posso ajudar hoje?"></textarea>
                </div>

                <div class="modal-actions">
                    <button type="button" id="delete-btn" class="btn-danger hidden">Deletar</button>
                    <div class="spacer"></div>
                    <button type="button" id="cancel-btn" class="btn-secondary">Cancelar</button>
                    <button type="submit" id="save-btn" class="btn-primary">Salvar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal for Create/Edit Category -->
    <div id="cat-modal" class="modal hidden">
        <div class="modal-content">
            <h2 id="cat-modal-title">Nova Categoria</h2>
            <form id="cat-form">
                <input type="hidden" id="cat-id">
                <div class="form-group">
                    <label for="cat-name">Nome do Menu</label>
                    <input type="text" id="cat-name" required placeholder="Ex: Procedimentos">
                </div>
                <div class="modal-actions">
                    <button type="button" id="cat-cancel-btn" class="btn-secondary">Cancelar</button>
                    <div class="spacer"></div>
                    <button type="submit" id="cat-save-btn" class="btn-primary">Salvar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="toast hidden">Copiado!</div>

    <!-- Global Tooltip Container -->
    <div id="global-tooltip" class="hidden"></div>

    <!-- Settings Modal -->
    <div id="settings-modal" class="modal hidden">
        <div class="modal-content">
            <h2>Personalizar Cores</h2>
            <form id="settings-form">
                <div class="color-input-group">
                    <label for="color-page-bg">Cor de Fundo da Página</label>
                    <input type="color" id="color-page-bg" value="#f4f4f4">
                </div>
                <div class="color-input-group">
                    <label for="color-bg">Cor do Botão (Fundo)</label>
                    <input type="color" id="color-bg" value="#ffffff">
                </div>
                <div class="color-input-group">
                    <label for="color-text">Cor do Texto</label>
                    <input type="color" id="color-text" value="#333333">
                </div>
                <div class="color-input-group">
                    <label for="color-active">Cor ao Clicar (Ativo)</label>
                    <input type="color" id="color-active" value="#2ecc71">
                </div>
                <div class="modal-actions">
                    <button type="button" id="reset-colors-btn" class="btn-danger">Restaurar Padrão</button>
                    <div class="spacer"></div>
                    <button type="button" id="close-settings-btn" class="btn-primary">Fechar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Urgent Message Modal -->
    <div id="urgent-modal" class="modal hidden">
        <div class="modal-content">
            <h2>Mensagem Urgente</h2>
            <form id="urgent-form">
                <div class="form-group">
                    <label for="urgent-input">Mensagem (Deixe em branco para remover)</label>
                    <textarea id="urgent-input" placeholder="Digite o aviso urgente aqui..."></textarea>
                </div>
                <div class="form-group">
                    <label for="urgent-blink-speed">Velocidade de Piscada</label>
                    <select id="urgent-blink-speed">
                        <option value="none">Sem Piscar</option>
                        <option value="0.5s">Rápida (0.5s)</option>
                        <option value="1s" selected>Normal (1s)</option>
                        <option value="2s">Lenta (2s)</option>
                        <option value="3s">Muito Lenta (3s)</option>
                    </select>
                </div>
                <div class="modal-actions">
                    <button type="button" id="urgent-cancel-btn" class="btn-secondary">Cancelar</button>
                    <div class="spacer"></div>
                    <button type="submit" class="btn-primary">Salvar Aviso</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Docs Modal -->
    <div id="docs-modal" class="modal hidden">
        <div class="modal-content large-modal">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                <h2>Documentos</h2>
                <div style="display: flex; gap: 0.5rem;">
                    <button id="docs-admin-toggle" class="btn-secondary" style="background: #666; color: white;"><i class="fas fa-lock"></i> Admin</button>
                    <button id="add-doc-btn" class="btn-primary hidden"><i class="fas fa-plus"></i> Novo</button>
                </div>
            </div>
            
            <div id="docs-list" class="docs-list">
                <!-- Docs items injected here -->
                <p class="empty-docs">Nenhum documento disponível.</p>
            </div>

            <!-- Add Doc Form (Inline hidden) -->
            <form id="doc-form" class="hidden" style="margin-top: 1rem; padding-top: 1rem; border-top: 1px solid #eee;">
                <h3>Adicionar Documento</h3>
                <div class="form-group">
                    <label>Título</label>
                    <input type="text" id="doc-title" required placeholder="Ex: Manual 2024">
                </div>
                <div class="form-group">
                    <label>Arquivo PDF</label>
                    <input type="file" id="doc-file" accept="application/pdf" required>
                </div>
                <div class="modal-actions">
                    <button type="button" id="cancel-doc-form" class="btn-secondary">Cancelar</button>
                    <div class="spacer"></div>
                    <button type="submit" class="btn-primary">Salvar</button>
                </div>
            </form>

            <div class="modal-actions" style="margin-top: 1rem;">
                <button type="button" id="close-docs-btn" class="btn-secondary" style="width: 100%;">Fechar</button>
            </div>
        </div>
    </div>

    <script src="app.js" type="module"></script>
</body>
</html>